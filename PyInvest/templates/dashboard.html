{% extends "base.html" %}

{% block title %}PyInvest – Score Barsi{% endblock %}

{% block content %}

<h2>PyInvest – Score Barsi</h2>

<table>
    <tr>
        <th>Ticker</th>
        <th>Preço Atual</th>
        <th>P/L</th>
        <th>P/L Médio</th>
        <th>DY</th>
        <th>DY Médio</th>
        <th>Payout</th>
        <th>ROE</th>
        <th>ROIC</th>
        <th>Dívida / EBITDA</th>
        <th>Anos c/ Dividendos</th>
        <th>Score</th>
        <th>Status</th>
    </tr>

    {% for s in stocks %}
    <tr>
        <td>{{ s.ticker }}</td>

        {# ===== PREÇO (Camada 1) ===== #}
        <td class="indicator {{ s.colors.price }}">
            {{ s.price or "N/A" }}
        </td>


        {# ===== P/L ===== #}
        <td class="indicator {{ s.colors.pl }}">
            {{ s.pl or "N/A" }}
        </td>

        <td>
            {{ "%.2f"|format(s.pl_medio) if s.pl_medio else "N/A" }}
        </td>

        {# ===== DY ===== #}
        <td class="indicator {{ s.colors.dy }}">
            {{ "%.2f%%"|format(s.dy*100) if s.dy else "N/A" }}
        </td>

        <td>
            {{ "%.2f%%"|format(s.dy_medio*100) if s.dy_medio else "N/A" }}
        </td>

        {# ===== PAYOUT ===== #}
        <td class="indicator {{ s.colors.payout }}">
            {{ "%.2f%%"|format(s.payout*100) if s.payout else "N/A" }}
        </td>

        {# ===== ROE ===== #}
        <td class="indicator {{ s.colors.roe }}">
            {{ "%.2f%%"|format(s.roe*100) if s.roe else "N/A" }}
        </td>

        {# ===== ROIC ===== #}
        <td class="indicator {{ s.colors.roic }}">
            {{ "%.2f%%"|format(s.roic*100) if s.roic else "N/A" }}
        </td>

        {# ===== DÍVIDA / EBITDA ===== #}
        <td class="indicator {{ s.colors.divida }}">
            {{ s.divida_ebitda or "N/A" }}
        </td>

        {# ===== ANOS DE DIVIDENDOS ===== #}
        <td class="indicator {{ s.colors.dividendos }}">
            {{ s.anos_dividendos }}
        </td>

        <td class="score">{{ s.score }}</td>

        {% if "Comprar" in s.status and "aos poucos" not in s.status %}
            <td class="status-buy">{{ s.status }}</td>
        {% elif "aos poucos" in s.status %}
            <td class="status-hold">{{ s.status }}</td>
        {% else %}
            <td class="status-wait">{{ s.status }}</td>
        {% endif %}
    </tr>
    {% endfor %}
</table>

{% endblock %}
