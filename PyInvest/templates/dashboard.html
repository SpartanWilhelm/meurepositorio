<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Decisor de Compra</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/finance.css') }}">
</head>
<body>

<div class="top-bar">
    <span>ðŸ‘¤ UsuÃ¡rio: <strong>{{ current_user.id }}</strong></span>
    <a href="{{ url_for('auth.logout') }}">Sair</a>
</div>

<h2>Decisor de Compra â€“ Score Barsi</h2>

<table>
    <tr>
        <th>Ticker</th>
        <th>PreÃ§o Atual</th>
        <th>P/L</th>
        <th>P/L MÃ©dio</th>
        <th>DY</th>
        <th>DY MÃ©dio</th>
        <th>Payout</th>
        <th>ROE</th>
        <th>ROIC</th>
        <th>DÃ­vida / EBITDA</th>
        <th>Anos c/ Dividendos</th>
        <th>Score</th>
        <th>Status</th>
    </tr>

    {% for s in stocks %}
    <tr>
        <td>{{ s.ticker }}</td>
        <td>{{ s.price or "N/A" }}</td>
        <td>{{ s.pl }}</td>
        <td>{{ "%.2f"|format(s.pl_medio) if s.pl_medio else "N/A" }}</td>
        <td>{{ "%.2f%%"|format(s.dy*100) if s.dy else "N/A" }}</td>
        <td>{{ "%.2f%%"|format(s.dy_medio*100) if s.dy_medio else "N/A" }}</td>
        <td>{{ "%.2f%%"|format(s.payout*100) if s.payout else "N/A" }}</td>
        <td>{{ "%.2f%%"|format(s.roe*100) if s.roe else "N/A" }}</td>
        <td>{{ "%.2f%%"|format(s.roic*100) if s.roic else "N/A" }}</td>
        <td>{{ s.divida_ebitda or "N/A" }}</td>
        <td>{{ s.anos_dividendos }}</td>
        <td class="score">{{ s.score }}</td>

        {% if "Comprar" in s.status and "aos poucos" not in s.status %}
            <td class="status-buy">{{ s.status }}</td>
        {% elif "aos poucos" in s.status %}
            <td class="status-hold">{{ s.status }}</td>
        {% else %}
            <td class="status-wait">{{ s.status }}</td>
        {% endif %}
    </tr>
    {% endfor %}
</table>

</body>
</html>
